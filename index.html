<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discipline Yourself Buddy</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body data-theme="dark">
    <div class="welcome-overlay" id="welcomeOverlay">
        <h1 class="welcome-title">Discipline Yourself Buddy</h1>
        <p class="motivation-popup" id="motivationPopup">Your cosmic journey to productivity starts now!</p>
    </div>
    <button class="theme-toggle" id="themeToggle">üåô</button>
    <button class="theme-selector-btn" id="themeSelectorBtn">üé®</button>
    <canvas id="starfield-canvas"></canvas>
    <div class="container">
        <div class="header">
            <h1 class="logo">Discipline Yourself Buddy</h1>
            <p class="tagline">Conquer your missions, one task at a time!</p>
            <p class="level-display" id="levelDisplay">Level: 1</p>
        </div>
        <div class="main-content">
            <div class="panel">
                <h2>Add New Mission</h2>
                <div class="input-group">
                    <input type="text" id="taskInput" placeholder="Enter mission name">
                    <select id="categorySelect">
                        <option value="study">Study</option>
                        <option value="DSA">DSA</option>
                        <option value="Development">Development</option>
                        <option value="project">Project</option>
                        <option value="habit">Habit</option>
                        <option value="other">Other</option>
                    </select>
                    <select id="prioritySelect">
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                    <button class="btn" onclick="addTask()">Add Mission</button>
                </div>
                <h2>Today's Missions</h2>
                <div class="task-list" id="taskList"></div>
                <div id="dailyChallenge"></div>
            </div>
            <div class="panel">
                <h2>Mission Control</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalTasks">0</div>
                        <div class="stat-label">Total Missions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="completedTasks">0</div>
                        <div class="stat-label">Completed Today</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="currentStreak">0</div>
                        <div class="stat-label">Streak Days</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="completionRate">0%</div>
                        <div class="stat-label">Completion Rate</div>
                    </div>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                <div class="streak-counter">
                    <span class="streak-number" id="streakDisplay">0</span>
                    <span class="fire-icon" id="fireIcon">üî•</span>
                </div>
                <div class="motivational-quote" id="motivationalQuote"></div>
                <div class="info-grid">
                    <div class="info-card">
                        <div class="info-header"><span>üìö</span>Lessons</div>
                        <p>Learn new concepts daily.</p>
                        <button class="btn-small" id="lessonsTrigger">Explore</button>
                    </div>
                    <div class="info-card">
                        <div class="info-header"><span>üìñ</span>Book Quotes</div>
                        <p>Get inspired by wisdom.</p>
                        <button class="btn-small" id="bookQuoteTrigger">Read</button>
                    </div>
                    <div class="info-card">
                        <div class="info-header"><span>üåå</span>Constellation</div>
                        <p>Track your streak.</p>
                        <button class="btn-small" id="constellationTrigger">View</button>
                    </div>
                    <div class="info-card">
                        <div class="info-header"><span>üèÜ</span>Achievements</div>
                        <p>Unlock your rewards.</p>
                        <button class="btn-small" id="achievementsTrigger">Check</button>
                    </div>
                    <div class="info-card">
                        <div class="info-header"><span>üìä</span>Analytics</div>
                        <p>Analyze your progress.</p>
                        <button class="btn-small" id="analyticsTrigger">View</button>
                    </div>
                    <div class="info-card">
                        <div class="info-header"><span>üìÖ</span>Weekly Report</div>
                        <p>Review your week.</p>
                        <button class="btn-small" id="weeklyReportTrigger">Report</button>
                    </div>
                </div>
                <h2>Mission Insight</h2>
                <p id="missionInsight">No missions yet today. Start by adding a new mission!</p>
                <h2>Time Analysis</h2>
                <div id="timeAnalysis"></div>
                <h2>Galactic Calendar</h2>
                <button class="calendar-toggle" onclick="toggleCalendar()">Show Full Month</button>
                <div class="calendar-container">
                    <div id="calendar" class="calendar-grid"></div>
                    <svg id="constellation-svg" width="100%" height="100%"></svg>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-overlay hidden" id="lessonsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Daily Lessons</h2>
                <button class="close-btn" id="closeLessonsModal">‚úñ</button>
            </div>
            <div class="modal-body" id="lessonsModalBody"></div>
            <div id="quizContainer"></div>
        </div>
    </div>
    <div class="modal-overlay hidden" id="bookQuoteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Book Quote</h2>
                <button class="close-btn" id="closeBookQuoteModal">‚úñ</button>
            </div>
            <div class="modal-body" id="bookQuoteModalBody"></div>
        </div>
    </div>
    <div class="modal-overlay hidden" id="constellationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Constellation Streak</h2>
                <button class="close-btn" id="closeConstellationModal">‚úñ</button>
            </div>
            <div class="modal-body" id="constellationModalBody"></div>
        </div>
    </div>
    <div class="modal-overlay hidden" id="focus-timer-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Focus Timer</h2>
                <button class="close-btn" id="closeTimerModal">‚úñ</button>
            </div>
            <div class="modal-body">
                <p class="timer-mission-name" id="timerMissionName"></p>
                <div class="timer-display">
                    <svg width="100%" height="100%" viewBox="0 0 120 120">
                        <circle class="timer-ring-bg" cx="60" cy="60" r="54"></circle>
                        <circle class="timer-ring-progress" id="timerRing" cx="60" cy="60" r="54" stroke-dasharray="339.292" stroke-dashoffset="339.292"></circle>
                    </svg>
                    <div class="timer-text" id="timerText">00:00</div>
                </div>
                <div class="timer-controls">
                    <button class="btn" id="timerControlBtn">Start</button>
                    <button class="btn" id="stopTimerBtn">Stop</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-overlay hidden" id="weeklyReportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Weekly Report</h2>
                <button class="close-btn" id="closeWeeklyReportModal">‚úñ</button>
            </div>
            <div class="modal-body" id="weeklyReportBody"></div>
        </div>
    </div>
    <div class="modal-overlay hidden" id="analyticsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Analytics Dashboard</h2>
                <button class="close-btn" id="closeAnalyticsModal">‚úñ</button>
            </div>
            <div class="modal-body">
                <canvas id="completionChart"></canvas>
                <canvas id="categoryChart"></canvas>
            </div>
        </div>
    </div>
    <div class="modal-overlay hidden" id="achievementsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Achievements</h2>
                <button class="close-btn" id="closeAchievementsModal">‚úñ</button>
            </div>
            <div class="modal-body" id="achievementsModalBody"></div>
        </div>
    </div>
    <div class="modal-overlay hidden" id="themeSelectorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Select Theme</h2>
                <button class="close-btn" onclick="hideModal('themeSelectorModal')">‚úñ</button>
            </div>
            <div class="modal-body" id="themeSelectorModalBody"></div>
        </div>
    </div>
    <div class="loading-spinner" id="loadingSpinner"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="script.js"></script>
</body>
</html>